<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Logout</title>
<script type="text/javascript" src="//www.gettips.com/js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="//www.gettips.com/js/sessvars.js"></script>
<script type="text/javascript">
var uid = getUrlParameter('UID');
if (typeof (uid) == "undefined") { uid = ""; }
var sessid = getUrlParameter('SES');
if (typeof (sessid) == "undefined") { sessid = ""; }
var domain = getUrlParameter('PP');
if (typeof (domain) == "undefined" || domain == "") { domain = "TIPS"; }
var redirect = getUrlParameter('RD');
if (typeof (redirect) == "undefined") { redirect = ""; }
var NoRegister = getUrlParameter('NR');
if (typeof (NoRegister) == "undefined" || NoRegister == "") { NoRegister = "N"; }
function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
}
function dynamicLogout() {
 	var expdate = new Date();
 	if (uid != "") {
		expdate.setTime (expdate.getTime() -  86400000);
		SetCookie("ID",uid, expdate, "/", ".certegrity.com");
		SetCookie("Sess",sessid, expdate, "/", ".certegrity.com");
		}
	else {
		DeleteCookie("ID","/",".certegrity.com");
		DeleteCookie("Sess","/",".certegrity.com");
		}

	sessvars.$.clearMem()
	sessvars.$.flush()
	sessvars.CIS_cmd = 'logout';
	if (redirect != "") {
		var sPageURL = window.location.href;
		var st = sPageURL.indexOf("RD=")+3;
		var en = sPageURL.length;
		var tredirect = "";
		if (st >= 0 && en >= 1) { tredirect = sPageURL.slice(st,en); }
		if (tredirect.indexOf(redirect)==0) {
			window.location.href = tredirect;
			} else {
			window.location.href = redirect;
			}
		return;
		}
	if (domain && domain != "") {
	    window.location.href = "https://www.gettips.com/newportal.html?PP=" + domain + "&NR=" + NoRegister;
	} else {
	    window.location.href = "https://www.gettips.com/newportal.html&NR=" + NoRegister;
	}
}
function SetCookie (name, value) {
	var argv = SetCookie.arguments;
	var argc = SetCookie.arguments.length;
	var expires = (argc > 2) ? argv[2] : null;
	var path = (argc > 3) ? argv[3] : null;
	var domain = (argc > 4) ? argv[4] : null;
	var secure = (argc > 5) ? argv[5] : false;
	document.cookie = name + "=" + escape (value) +
		((expires == null) ? "" : ("; expires=" + expires.toGMTString())) +
		((path == null) ? "" : ("; path=" + path)) +
		((domain == null) ? "" : ("; domain=" + domain)) +
 		((secure == true) ? "; secure" : "");
}
function DeleteCookie( name, path, domain ) {
	document.cookie = name + "=" + ( ( path ) ? ";path=" + path : "") + ( ( domain ) ? ";domain=" + domain : "" ) + ";expires=Thu, 01-Jan-1970 00:00:01 GMT";
}
$(document).ready(function() {
	dynamicLogout();
});
</script>
</HEAD>
<body>
</body>
</html>
